<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MC - CA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; transition: background-color 0.4s; }
        body, html { height: 100%; width: 100%; background-color: white; overflow: hidden; }
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }

        /* --- INTRO & HOME --- */
        #intro-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; display: flex; justify-content: center; align-items: center; }
        video { width: 100%; height: 100%; object-fit: cover; }
        #enter-btn { position: absolute; bottom: 5%; right: 5%; background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; display: none; font-weight: bold; }
        #home-page { display: none; height: 100vh; width: 100vw; justify-content: center; align-items: center; position: relative; z-index: 10; }
        .main-logo { font-size: 8rem; font-weight: bold; letter-spacing: 2px; position: relative; }
        .hidden-link { position: absolute; top: 0; width: 40%; height: 100%; background: transparent; cursor: pointer; border: none; }
        .link-mc { left: 0; } .link-ca { right: 0; }

        /* --- HEADER --- */
        .header { padding: 20px 5%; border-bottom: 2px solid white; background-color: rgba(244, 244, 244, 0.95); display: flex; justify-content: space-between; align-items: center; z-index: 30; min-height: 140px; position: relative; }
        .header-center-area { position: absolute; left: calc(50% + 150px); transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .header-center-title { font-size: 1.5rem; font-weight: bold; color: black; text-transform: uppercase; }
        .sw-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; font-size: 0.8rem; font-weight: bold; max-width: 800px; }
        .sw-tag { padding: 2px 6px; background: transparent; }
        .sw-tag.green-h { background: rgb(169, 212, 177); }
        .sw-tag.blue-h { background: rgb(122, 161, 190); }
        .sw-tag.teal-h { background: rgb(133, 162, 162); }
        .sw-tag.red-h { background: rgb(227, 59, 78); }
        .header-titles h1 { font-size: 3.5rem; font-weight: bold; }
        .header-titles p { font-size: 1.1rem; color: #333; }
        .header-logo img { height: 60px; width: auto; }

        /* --- CONTENT WRAPPER --- */
        .content-wrapper { display: flex; flex: 1; height: calc(100vh - 140px); overflow: hidden; position: relative; z-index: 10; }
        .sidebar { width: 300px; border-right: 2px solid grey; display: flex; flex-direction: column; padding: 40px 0 40px 5%; gap: 15px; background: white; z-index: 30; }
        
        /* --- GALLERY CONTAINER --- */
        .gallery { flex: 1; display: flex; flex-direction: column; align-items: center; overflow-y: auto; z-index: 20; background: transparent; }
        
        /* --- RELOADINGENOVA SPECIFIC STYLES --- */
        .genova-content { width: 100%; color: white; position: relative; cursor: none; padding-top: 50px; }
        #cursor-dot { width: 10px; height: 10px; background-color: rgb(173, 54, 35); border-radius: 50%; position: fixed; pointer-events: none; z-index: 99999; transform: translate(-50%, -50%); display: none; }
        .genova-title { color: rgb(173, 54, 35); font-size: 52px; margin-bottom: 80px; text-align: center; }
        .bilingual-grid { display: flex; width: 100%; gap: 60px; margin-bottom: 100px; padding: 0 10%; }
        .lang-col { flex: 1; display: flex; flex-direction: column; }
        .description { font-size: 16px; line-height: 1.7; text-align: justify; }
        .it-side { text-align: right; color: white; }
        .en-side { text-align: left; color: #888; }
        .video-box { width: 80%; aspect-ratio: 16/9; margin: 0 auto 100px auto; background: white; }
        .video-box video, .side-box video { width: 100%; height: 100%; object-fit: cover; }
        
        /* SCHEMA TECNICO GENOVA */
        #schema-master-container { position: relative; width: 100%; padding: 0 5%; display: flex; flex-direction: column; }
        .schema-row { display: flex; position: relative; width: 100%; margin-bottom: 250px; align-items: flex-start; }
        .box-container { position: relative; border: 1px solid rgba(255, 255, 255, 0.15); z-index: 10; background-color: #1a1a1a; }
        .box-label { position: absolute; top: -35px; left: 0; font-size: 13px; font-weight: bold; color: rgb(122, 161, 190); white-space: nowrap; }
        .corner { width: 8px; height: 8px; background-color: rgb(122, 161, 190); position: absolute; }
        .tl { top: -4px; left: -4px; } .tr { top: -4px; right: -4px; }
        .bl { bottom: -4px; left: -4px; } .br { bottom: -4px; right: -4px; }
        .gray-left { width: 20vw; aspect-ratio: 4/3; }
        .mid-right { width: 40vw; aspect-ratio: 16/9; margin-left: 10vw; margin-top: 60px; }
        #master-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: visible; z-index: 5; }
        .connector-path { fill: none; stroke: rgb(122, 161, 190); stroke-width: 2; }

        .final-white-box { width: 60vw; aspect-ratio: 250/176; background: white; margin: 0 auto 150px auto; position: relative; display: flex; justify-content: center; }
        .final-white-box img { width: 100%; height: 100%; object-fit: cover; }
        .nav-arrow { position: absolute; right: 20px; bottom: 20px; width: 45px; height: 45px; background: rgba(0,0,0,0.1); color: black; display: flex; justify-content: center; align-items: center; cursor: pointer; border-radius: 4px; }
        .dual-box-row { display: flex; justify-content: center; width: 60vw; margin: 0 auto 200px auto; gap: 40px; }
        .side-box { flex: 1; aspect-ratio: 16/9; }

        /* --- STANDARD STYLES --- */
        .img-wrap { width: 100%; display: flex; flex-direction: column; align-items: center; }
        .gallery img { width: 100%; height: auto; object-fit: contain; display: block; }
        .cp-caption { align-self: flex-end; margin-top: 10px; font-size: 0.85rem; font-weight: bold; background: white; color: black; padding: 4px 8px; text-transform: uppercase; }
        .project-description { width: 100%; padding: 20px; text-align: center; line-height: 1.6; background: rgba(255,255,255,0.9); margin-bottom: 20px; font-weight: bold; }
        .menu-item { cursor: pointer; font-size: 1.1rem; text-transform: uppercase; color: black; text-align: left; }
        .menu-item.active-blue { color: rgb(122, 161, 190); font-weight: bold; }
        .menu-item.active-green { color: rgb(169, 212, 177); font-weight: bold; }
        .menu-item.active-teal { color: rgb(133, 162, 162); font-weight: bold; }
        .menu-item.active-red { color: rgb(227, 59, 78); font-weight: bold; }
        .back-home { margin-top: auto; font-weight: bold; cursor: pointer; }
        .dark-mode { background-color: black !important; color: white !important; }
        .dark-mode .sidebar { background-color: black !important; border-right-color: #444 !important; }
        .dark-mode .header { background-color: #111 !important; border-bottom-color: #333 !important; }
        .dark-mode .menu-item, .dark-mode .back-home, .dark-mode .header-titles p, .dark-mode .header-center-title, .dark-mode .sw-tag { color: white !important; }
    </style>
</head>
<body>
    <div id="cursor-dot"></div>
    <canvas id="bg-canvas"></canvas>
    <div id="intro-container"><video autoplay muted loop playsinline><source src="intro.mp4" type="video/mp4"></video><button id="enter-btn" onclick="startSite()">ENTRA</button></div>
    
    <div id="home-page">
        <div class="main-logo">MC - CA
            <button class="hidden-link link-mc" onclick="openPage('mc')"></button>
            <button class="hidden-link link-ca" onclick="openPage('ca')"></button>
        </div>
    </div>

    <div id="main-interface" style="display:none; flex-direction:column; height:100vh;">
        <div class="header">
            <div class="header-titles"><h1 id="side-initials"></h1><p id="side-fullname"></p></div>
            <div class="header-center-area"><div class="header-center-title" id="proj-title"></div><div class="sw-list" id="sw-box"></div></div>
            <div class="header-logo"><img src="logo.PNG" alt="Logo"></div>
        </div>
        <div class="content-wrapper">
            <div class="sidebar" id="menu-box"></div>
            <div class="gallery" id="gallery-box"></div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let currentEffect = ""; 
        let randomLines = [], ellipses = [], waves = [];
        let mouseX = 0, mouseY = 0;

        const softwareList = ["AutoCAD", "SketchUp", "Illustrator", "Revit", "Indesign", "V-Ray", "Lumion 3D", "Enscape", "Photoshop", "Pacchetto Office", "Rhino", "Grasshopper", "Dynamo"];
        
        // --- GESTIONE CURSORE ROSSO GENOVA ---
        const dot = document.getElementById('cursor-dot');
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            dot.style.left = e.clientX + 'px'; dot.style.top = e.clientY + 'px';
            if(currentEffect === "CASA PIONIERA" || currentEffect === "THE ELLIPSE") drawEffect(currentEffect);
        });

        function startSite() { document.getElementById('intro-container').style.display='none'; document.getElementById('home-page').style.display='flex'; }
        function openPage(user) {
            document.getElementById('home-page').style.display='none';
            document.getElementById('main-interface').style.display='flex';
            document.getElementById('side-initials').innerText = user.toUpperCase();
            document.getElementById('side-fullname').innerText = user === 'mc' ? 'Martina Colucci' : 'Claudio Antonelli';
            buildMenu(user);
        }

        function buildMenu(user) {
            const box = document.getElementById('menu-box'); box.innerHTML = "";
            const projs = user === 'mc' ? ["PROGETTO 1", "PROGETTO 2", "PROGETTO 3"] : ["CASA PIONIERA", "CENTRO POLIFUNZIONALE", "THE ELLIPSE", "RIQUALIFICAZIONE MOLINETTE", "RELOADINGENOVA"];
            projs.forEach(p => {
                const d = document.createElement('div'); d.className = 'menu-item'; d.innerText = p;
                d.onclick = () => loadProject(user, p, d);
                box.appendChild(d);
            });
            const back = document.createElement('div'); back.className = 'back-home'; back.innerText = "MC - CA"; back.onclick = () => location.reload(); box.appendChild(back);
        }

        function loadProject(user, title, element) {
            document.querySelectorAll('.menu-item').forEach(m => m.className = 'menu-item');
            if(title === "CASA PIONIERA") element.classList.add('active-green');
            else if(title === "THE ELLIPSE") element.classList.add('active-teal');
            else if(title === "RIQUALIFICAZIONE MOLINETTE") element.classList.add('active-red');
            else element.classList.add('active-blue');

            document.getElementById('proj-title').innerText = title;
            const gallery = document.getElementById('gallery-box');
            gallery.innerHTML = ""; 
            
            // Toggle Cursore e Dark Mode
            dot.style.display = (title === "RELOADINGENOVA") ? "block" : "none";
            document.body.classList.toggle('dark-mode', title === "RELOADINGENOVA");
            
            if(title === "RELOADINGENOVA") {
                gallery.innerHTML = `
                    <div class="genova-content">
                        <h1 class="genova-title">ReloadinGenova</h1>
                        <div class="bilingual-grid">
                            <div class="lang-col it-side"><div class="description">L'obiettivo della tesi è stato quello di progettare la riqualificazione di un'area industriale a Genova...</div></div>
                            <div class="lang-col en-side"><div class="description">The goal of the thesis was to design the redevelopment of an industrial area in Genoa...</div></div>
                        </div>
                        <div class="video-box"><video autoplay muted loop playsinline><source src="genova1.mp4" type="video/mp4"></video></div>
                        <div id="schema-master-container">
                            <svg id="master-svg"></svg>
                            ${[0,1,2,3].map(i => `
                                <div class="schema-row" id="row-${i}">
                                    <div class="box-container gray-left">
                                        <div class="box-label">${['MASTERPLAN','VOLUME','DISTRIBUZIONE','DISPOSITIVI ESTERNI'][i]}</div>
                                        <div class="img-wrapper"><img src="genova${i+2}.png"></div>
                                        <div class="corner tl"></div><div class="corner tr"></div><div class="corner bl"></div><div class="corner br"></div>
                                    </div>
                                    <div class="box-container mid-right">
                                        <div class="img-wrapper"><video autoplay muted loop playsinline><source src="genova${i+6}.mp4" type="video/mp4"></video></div>
                                        <div class="corner tl"></div><div class="corner tr"></div><div class="corner bl"></div><div class="corner br"></div>
                                    </div>
                                </div>`).join('')}
                            <div id="final-box" class="box-container final-white-box">
                                <div class="corner tl"></div><div class="corner tr"></div><div class="corner bl"></div><div class="corner br"></div>
                                <img src="genova10.png" id="genova-main-img">
                                <div class="nav-arrow" onclick="document.getElementById('genova-main-img').src.includes('10') ? document.getElementById('genova-main-img').src='genova11.png' : document.getElementById('genova-main-img').src='genova10.png'">→</div>
                            </div>
                            <div class="dual-box-row">
                                <div class="box-container side-box"><video autoplay muted loop playsinline><source src="genova12.mp4" type="video/mp4"></video></div>
                                <div class="box-container side-box"><video autoplay muted loop playsinline><source src="genova13.mp4" type="video/mp4"></video></div>
                            </div>
                        </div>
                    </div>`;
                setTimeout(drawGenovaLines, 100);
            } else {
                // Logica standard per altri progetti
                let count = (title === "CENTRO POLIFUNZIONALE") ? 7 : 4;
                for(let i=1; i<=count; i++) {
                    const div = document.createElement('div'); div.className = 'img-wrap';
                    const img = document.createElement('img'); img.src = `${user.toUpperCase()}/${title} ${i}.PNG`;
                    div.appendChild(img); gallery.appendChild(div);
                }
            }
            updateSW(title);
            randomLines = []; ellipses = []; waves = []; drawEffect(title);
        }

        function drawGenovaLines() {
            const svg = document.getElementById('master-svg');
            const finalBox = document.getElementById('final-box');
            const container = document.getElementById('schema-master-container');
            if (!container || !finalBox || !svg) return;
            const cRect = container.getBoundingClientRect();
            const fRect = finalBox.getBoundingClientRect();
            const fRX = fRect.right - cRect.left;
            const fCY = (fRect.top + fRect.height/2) - cRect.top;
            let paths = "";
            for (let i=0; i<4; i++) {
                const r = document.getElementById(`row-${i}`);
                const g = r.querySelector('.gray-left').getBoundingClientRect();
                const m = r.querySelector('.mid-right').getBoundingClientRect();
                const gX = g.right - cRect.left; const gY = (g.top + g.height/2) - cRect.top;
                const mLX = m.left - cRect.left; const mRX = m.right - cRect.left; const mY = (m.top + m.height/2) - cRect.top;
                paths += `<path class="connector-path" d="M ${gX},${gY} H ${gX+40} V ${mY} H ${mLX}" />`;
                paths += `<path class="connector-path" d="M ${mRX},${mY} H ${fRX+(20+i*25)} V ${fCY} H ${fRX}" />`;
            }
            svg.innerHTML = paths;
        }

        function updateSW(proj) {
            const box = document.getElementById('sw-box'); box.innerHTML = "";
            softwareList.forEach(s => {
                const span = document.createElement('span'); span.className = 'sw-tag'; span.innerText = s;
                if(proj === "CASA PIONIERA" && ["AutoCAD", "Illustrator", "SketchUp"].includes(s)) span.classList.add('green-h');
                if(proj === "RELOADINGENOVA" && ["Rhino", "Grasshopper"].includes(s)) span.classList.add('blue-h');
                box.appendChild(span);
            });
        }

        function drawEffect(type) {
            currentEffect = type; ctx.clearRect(0,0,canvas.width,canvas.height);
            if(type === "CASA PIONIERA") {
                ctx.strokeStyle = "black";
                for(let x=0; x<canvas.width; x+=60) {
                    for(let y=0; y<canvas.height; y+=90) {
                        ctx.beginPath(); ctx.rect(x,y,60,90);
                        if(mouseX>=x && mouseX<=x+60 && mouseY>=y && mouseY<=y+90) { ctx.fillStyle="rgba(169, 212, 177, 0.5)"; ctx.fill(); }
                        ctx.stroke();
                    }
                }
            }
        }
    </script>
</body>
</html>
</html>
